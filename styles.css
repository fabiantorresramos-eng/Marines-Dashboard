:root{
  /* AGONY PATCH PALETTE (matched to Agony-app) */
  --bg-main:#050304;
  --bg-header:#050304;
  --bg-panel:#080508;
  --bg-panel-alt:#12080b;
  --bg-chip:#12080b;

  --line-soft:#2a181c;
  --line-strong:#4a262e;

  --text-main:#f6f3f3;
  --text-soft:#d0c3c3;
  --text-dim:#89787a;

  --accent-orange:#c89b4b;
  --accent-orange-soft:rgba(200,155,75,.22);
  --accent-amber:#f6df9a;
  --accent-red:#e03434;
  --accent-green:#6f8c4f;
  --accent-blue:#cfd5ff;
  --accent-cyan:#ff4b6e;
  --accent-cyan-soft:rgba(255,75,110,.25);

  --danger:#ff4b6e;
  --warning:#f6df9a;
  --success:#6f8c4f;

  --radius-lg:10px;
  --radius-md:7px;
  --shadow-soft:0 0 26px rgba(0,0,0,.95);

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: "Roboto", system-ui, -apple-system, Segoe UI, Helvetica, Arial, sans-serif;
  --display: "Orbitron", "Rajdhani", "Roboto", system-ui, -apple-system, Segoe UI, Helvetica, Arial, sans-serif;
}

/* ------------------------------------------------------------------
   HUD skin ("Solo Leveling" feel) â€” keeps the Agony palette
   ------------------------------------------------------------------ */

.hud-title{
  font-family: var(--display);
  letter-spacing: .08em;
  text-transform: uppercase;
  margin: 0;
}

.hud-label{
  font-family: var(--mono);
  letter-spacing: .14em;
  text-transform: uppercase;
  font-size: 11px;
  color: rgba(239,226,226,.72);
}

.hud-shell{
  position: relative;
  background:
    radial-gradient(1200px 700px at 30% 10%, rgba(0,216,255,.10), transparent 55%),
    radial-gradient(900px 600px at 70% 40%, rgba(255,52,116,.10), transparent 60%),
    rgba(0,0,0,.58);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow:
    0 0 0 1px rgba(255,52,116,.12),
    0 25px 80px rgba(0,0,0,.6);
  overflow: hidden;
}

.hud-shell:before{
  content:"";
  position:absolute; inset:0;
  background:
    linear-gradient(rgba(255,255,255,.06) 1px, transparent 1px) 0 0/48px 48px,
    linear-gradient(90deg, rgba(255,255,255,.05) 1px, transparent 1px) 0 0/48px 48px;
  opacity:.18;
  pointer-events:none;
}

.hud-shell:after{
  content:"";
  position:absolute; inset:10px;
  background:
    linear-gradient(var(--accent), var(--accent)) left top/26px 2px no-repeat,
    linear-gradient(var(--accent), var(--accent)) left top/2px 26px no-repeat,
    linear-gradient(var(--accent2), var(--accent2)) right top/26px 2px no-repeat,
    linear-gradient(var(--accent2), var(--accent2)) right top/2px 26px no-repeat,
    linear-gradient(var(--accent2), var(--accent2)) left bottom/26px 2px no-repeat,
    linear-gradient(var(--accent2), var(--accent2)) left bottom/2px 26px no-repeat,
    linear-gradient(var(--accent), var(--accent)) right bottom/26px 2px no-repeat,
    linear-gradient(var(--accent), var(--accent)) right bottom/2px 26px no-repeat;
  opacity:.65;
  pointer-events:none;
}

.hud-module{
  background: rgba(12,12,16,.45);
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: inset 0 0 0 1px rgba(255,52,116,.10);
}

.hud-module .module-header{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 12px;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255,255,255,.06);
}

/* HUD chips (specialty tabs) */
.hud-chip{
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.25);
}
.tab.hud-chip.active{
  border-color: rgba(0,216,255,.55);
  box-shadow: 0 0 0 2px rgba(0,216,255,.12), 0 0 22px rgba(0,216,255,.18);
}

/* Radar readability + glow */
.big-radar .radar-label{
  text-shadow: 0 0 10px rgba(0,216,255,.20), 0 0 18px rgba(255,52,116,.18);
}
.big-radar .radar-dot{
  filter: drop-shadow(0 0 6px rgba(0,216,255,.35)) drop-shadow(0 0 10px rgba(255,52,116,.20));
}
.big-radar .radar-hit{
  cursor: pointer;
}

/* HUD bars */
.area-row .bar{
  height: 8px;
  border-radius: 999px;
}
.area-row .bar i{
  background: linear-gradient(90deg, rgba(0,216,255,.85), rgba(255,52,116,.85));
  box-shadow: 0 0 16px rgba(0,216,255,.22);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  color:var(--text-main);
  background:
    radial-gradient(circle at 0 0, rgba(0,240,255,.12) 0, transparent 52%),
    radial-gradient(circle at 100% 0, rgba(255,154,75,.10) 0, transparent 55%),
    radial-gradient(circle at 50% 120%, rgba(255,75,110,.12) 0, transparent 55%),
    var(--bg-main);
  background-attachment:fixed;
}

/* subtle scanlines */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background-image:repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,.04),
    rgba(255,255,255,.04) 1px,
    transparent 1px,
    transparent 3px
  );
  mix-blend-mode:soft-light;
  opacity:.22;
  z-index:-1;
}
/* faint grid */
body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background-image:
    linear-gradient(to right, rgba(0,240,255,.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,240,255,.04) 1px, transparent 1px);
  background-size:40px 40px;
  opacity:.14;
  z-index:-1;
}

/* Layout */
.md-wrap{max-width:1320px;margin:0 auto;padding:18px 18px 48px}

.md-topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:12px 18px;
  background:
    radial-gradient(circle at 0 0, rgba(0,240,255,.16) 0, transparent 52%),
    radial-gradient(circle at 100% 0, rgba(255,154,75,.14) 0, transparent 55%),
    var(--bg-header);
  border:1px solid var(--accent-cyan-soft);
  border-radius:var(--radius-lg);
  box-shadow:
    0 0 26px rgba(0,0,0,1),
    0 0 32px rgba(0,240,255,.35);
  position:sticky;
  top:12px;
  z-index:10;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  min-width:260px;
}
.brand-mark{
  width:28px;
  height:28px;
  border-radius:4px;
  background:radial-gradient(circle at 20% 0%, #0ff 0, #07101c 48%, #04060a 100%);
  border:1px solid #35b8ff;
  box-shadow:0 0 16px rgba(0,240,255,.35);
}
.brand-title{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.brand-title h1{
  margin:0;
  font-family:var(--display);
  letter-spacing:.6px;
  font-size:18px;
  text-transform:uppercase;
}
.brand-title p{
  margin:0;
  color:var(--text-dim);
  font-size:12px;
}

.top-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}

.control{
  background:rgba(18,8,11,.75);
  border:1px solid var(--line-soft);
  color:var(--text-main);
  border-radius:7px;
  padding:10px 12px;
  font-size:12.5px;
  outline:none;
  min-width:150px;
}
.control::placeholder{color:rgba(208,195,195,.55)}

.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid var(--line-soft);
  background:rgba(18,8,11,.75);
  color:var(--text-dim);
  font-family:var(--mono);
  font-size:12px;
}
.pill b{color:var(--text-main)}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:10px 12px;
  border-radius:7px;
  border:1px solid var(--line-strong);
  background:linear-gradient(180deg, rgba(18,8,11,.85), rgba(8,5,8,.75));
  color:var(--text-main);
  font-family:var(--display);
  letter-spacing:.4px;
  text-transform:uppercase;
  font-size:12px;
  cursor:pointer;
  box-shadow:0 0 18px rgba(0,0,0,.65);
}
.btn:hover{border-color:rgba(255,75,110,.55); box-shadow:0 0 18px rgba(255,75,110,.18), 0 0 18px rgba(0,240,255,.12)}
.btn:active{transform:translateY(1px)}
.btn:disabled{opacity:.45; cursor:not-allowed; filter:saturate(.7)}
.btn.secondary{border-color:rgba(53,184,255,.45)}
.btn.link{background:transparent}

.md-content{margin-top:16px;display:grid;grid-template-columns:1fr;gap:14px}

.small{
  color:var(--text-dim);
  font-size:12px;
  font-family:var(--mono);
  padding:12px 2px;
}

/* Option C: hierarchy drill-down */
.md-breadcrumb{
  margin-top:10px;
  padding:8px 10px;
  border:1px solid rgba(255,75,110,.14);
  border-radius:10px;
  background:linear-gradient(180deg, rgba(18,8,11,.62), rgba(8,5,8,.52));
  box-shadow:0 0 18px rgba(0,0,0,.6);
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}
.crumb{
  border:1px solid rgba(255,75,110,.18);
  background:rgba(0,0,0,.15);
  color:var(--text-soft);
  border-radius:999px;
  padding:6px 10px;
  font-family:var(--display);
  text-transform:uppercase;
  letter-spacing:.4px;
  font-size:12px;
  cursor:pointer;
}
.crumb:hover{border-color:rgba(255,75,110,.45); color:var(--text-main)}
.sep{color:rgba(246,243,243,.35); font-family:var(--display); margin:0 2px}

.view-head{margin:6px 2px 8px}
.view-title{font-family:var(--display); letter-spacing:.6px; text-transform:uppercase; font-size:14px}
.view-sub{margin-top:4px; color:var(--text-dim); font-size:12px; font-family:var(--mono)}

.tile-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
.tile{
  border:1px solid rgba(255,75,110,.20);
  background:linear-gradient(180deg, rgba(18,8,11,.78), rgba(8,5,8,.55));
  border-radius:14px;
  padding:14px;
  box-shadow:0 0 22px rgba(0,0,0,.75);
  cursor:pointer;
  text-align:left;
  position:relative;
  overflow:hidden;
}
.tile:hover{border-color:rgba(255,75,110,.45); box-shadow:0 0 22px rgba(255,75,110,.18), 0 0 22px rgba(0,240,255,.10)}
.tile:active{transform:translateY(1px)}
.tile-head{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;margin-bottom:10px}
.tile-left{display:flex;flex-direction:column;gap:6px;min-width:0}
.tile-label{font-family:var(--display); font-size:20px; letter-spacing:.6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.tile-kind{font-family:var(--mono); font-size:12px; color:rgba(0,240,255,.82); letter-spacing:.7px}
.tile-count{font-family:var(--display); font-size:20px; color:var(--accent-amber); flex:0 0 auto}
.tile-sub{margin-top:6px;color:var(--text-dim);font-family:var(--mono);font-size:12px}
.tile-bar{margin-top:12px;height:10px;border-radius:999px;background:rgba(255,75,110,.12);border:1px solid rgba(255,75,110,.18);overflow:hidden}
.tile-bar i{display:block;height:100%;background:linear-gradient(90deg, rgba(0,240,255,.65), rgba(255,75,110,.70))}

/* Cards */
.cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.card{
  border:1px solid rgba(255,75,110,.18);
  background:linear-gradient(180deg, rgba(18,8,11,.75), rgba(8,5,8,.55));
  border-radius:12px;
  padding:12px;
  box-shadow:0 0 22px rgba(0,0,0,.75);
  cursor:pointer;
  position:relative;
}
.card:hover{border-color:rgba(255,75,110,.42); box-shadow:0 0 22px rgba(255,75,110,.16), 0 0 22px rgba(0,240,255,.12)}

.card-top{display:flex;gap:10px;align-items:center}
.avatar{
  width:38px;height:38px;border-radius:8px;
  background:radial-gradient(circle at 20% 0%, rgba(0,240,255,.95) 0, rgba(7,16,28,.85) 52%, rgba(4,6,10,.95) 100%);
  border:1px solid rgba(53,184,255,.65);
  box-shadow:0 0 16px rgba(0,240,255,.25);
  display:flex;align-items:center;justify-content:center;
  font-family:var(--display);
  letter-spacing:.8px;
}

/* Avatar can be initials OR an MOS artwork image */
.avatar img{
  width:100%;
  height:100%;
  display:block;
  border-radius:8px;
  object-fit:cover;
  object-position:center 20%;
}
.avatar.has-img{
  background:transparent;
  border:1px solid rgba(53,184,255,.35);
  box-shadow:0 0 14px rgba(0,240,255,.18);
}
.card-name{display:flex;gap:8px;align-items:baseline;flex-wrap:wrap}
.rank{font-family:var(--display);text-transform:uppercase;letter-spacing:.5px;color:var(--accent-amber);font-size:12px}
.name{font-family:var(--display);letter-spacing:.4px;font-size:16px}
.card-sub{margin-top:4px;display:flex;gap:6px;flex-wrap:wrap}
.badge{
  display:inline-flex;align-items:center;gap:6px;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid var(--line-soft);
  background:rgba(18,8,11,.8);
  color:var(--text-dim);
  font-family:var(--mono);
  font-size:11px;
}
.badge.ok{border-color:rgba(111,140,79,.6);color:rgba(246,243,243,.9)}
.badge.warn{border-color:rgba(246,223,154,.6);color:rgba(246,243,243,.9)}

.card-mid{margin-top:10px;display:grid;grid-template-columns:1fr;gap:10px}
.kpis{display:flex;gap:10px;justify-content:space-between}
.kpi .label{font-family:var(--mono);color:var(--text-dim);font-size:11px}
.kpi .value{font-family:var(--display);font-size:18px;letter-spacing:.5px;color:var(--text-main)}
.kpi small{font-size:12px;color:var(--text-dim)}

.radar-grid{display:grid;grid-template-columns:repeat(2, 1fr);gap:8px}
.radar-item{
  border:1px solid rgba(255,75,110,.12);
  border-radius:10px;
  padding:8px;
  background:rgba(8,5,8,.35);
}
.radar-item .rlabel{
  display:flex;align-items:center;justify-content:space-between;
  gap:6px;
  font-family:var(--mono);
  font-size:11px;
  color:var(--text-dim);
  margin-bottom:6px;
}
.radar-item .rlabel b{color:var(--text-soft);font-weight:600}

.mini-radar{width:100%;height:auto;display:block}
.radar-point{cursor:pointer}
/* Make radar interaction reliable: a bigger invisible hit target + a visible dot */
.radar-hit{fill:transparent;stroke:transparent;pointer-events:all}
.radar-dot{fill:rgba(255,75,110,.55);stroke:rgba(200,155,75,.90);stroke-width:1.4;pointer-events:none}
/* Hover effect (the dot comes right after the hit circle in DOM) */
.radar-hit:hover + .radar-dot{filter:drop-shadow(0 0 8px rgba(255,75,110,.55))}

/* Modal */
.md-modal{
  position:fixed;inset:0;background:rgba(0,0,0,.62);
  display:none;align-items:center;justify-content:center;
  padding:18px;
  z-index:999;
}
.md-modal.show{display:flex}
.md-dialog{
  width:min(980px, 100%);
  background:linear-gradient(180deg, rgba(8,5,8,.95), rgba(18,8,11,.92));
  border:1px solid rgba(255,75,110,.28);
  border-radius:14px;
  box-shadow:0 0 34px rgba(0,0,0,.95);
  overflow:hidden;
}
.md-dialog header{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:12px 14px;
  border-bottom:1px solid rgba(255,75,110,.20);
}
.md-dialog header .left{display:flex;align-items:flex-start;gap:14px}

/* Bigger profile photo + header meta chips */
.md-dialog header .avatar{width:72px;height:72px;border-radius:14px}
.md-dialog header .avatar img{width:100%;height:100%;object-fit:cover;border-radius:14px}
.md-dialog header .title{padding-top:2px}
.md-dialog header .meta-chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.md-dialog header .meta-chip{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid rgba(255,75,110,.18);
  background:rgba(18,8,11,.55);
  color:var(--text);
  border-radius:999px;
  padding:6px 10px;
  font-family:var(--mono);
  font-size:12px;
}
.md-dialog header .meta-chip .dot{width:8px;height:8px;border-radius:999px;display:inline-block;box-shadow:0 0 10px rgba(0,0,0,.6)}
.md-dialog header .meta-chip .dot.s-active{background:rgba(92,255,196,.95)}
.md-dialog header .meta-chip .dot.s-tad{background:rgba(255,214,102,.95)}
.md-dialog header .meta-chip .dot.s-leave{background:rgba(255,75,110,.95)}
.md-dialog header .meta-chip .dot.s-unk{background:rgba(180,200,255,.85)}
.md-dialog header .meta-chip .dot.s-op{background:rgba(73,201,255,.95)}
.md-dialog header .title{display:flex;flex-direction:column;gap:2px}
.md-dialog header .title b{font-family:var(--display);letter-spacing:.6px;text-transform:uppercase}
.md-dialog header .title span{font-family:var(--mono);color:var(--text-dim);font-size:12px}

.md-body{display:grid;grid-template-columns:1.55fr .85fr;gap:12px;padding:12px}

/* --- Profile modal v2 layout: photo left, radar right, details bottom --- */
.md-body.md-body-v2{
  /* Balanced desktop layout: make left (info) and right (radar) the same size */
  grid-template-columns: 1fr 1fr;
  grid-template-areas: "left right" "bottom bottom";
  align-items: stretch;
}
.md-body.md-body-v2 > .md-left,
.md-body.md-body-v2 > .md-right{
  /* Ensure both panels share the same visual height on the first row */
  display:flex;
  flex-direction:column;
  height:100%;
  min-height:520px;
}
.md-body.md-body-v2 .md-left{grid-area:left}
.md-body.md-body-v2 .md-right{grid-area:right}
.md-body.md-body-v2 .md-bottom{grid-area:bottom}

.profile-side{display:flex;flex-direction:column;gap:12px}
.profile-photo{
  width:180px;height:180px;border-radius:18px;overflow:hidden;
  border:1px solid rgba(0,240,255,.2);
  box-shadow:0 0 22px rgba(0,240,255,.10), 0 0 18px rgba(255,75,110,.08);
  background:rgba(10,8,10,.6);
}
.profile-photo img{width:100%;height:100%;object-fit:cover;display:block}
.profile-photo .avatar-fallback{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-family:var(--display);letter-spacing:.6px}

.profile-info{display:flex;flex-direction:column;gap:10px}
.profile-info .meta-chips{display:flex;flex-wrap:wrap;gap:8px}
.info-grid{display:grid;grid-template-columns:1fr;gap:8px}
.info-row{display:flex;justify-content:space-between;gap:10px;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,75,110,.10);background:rgba(6,4,6,.45)}
.info-row .k{font-family:var(--mono);font-size:11px;color:var(--text-dim)}
.info-row .v{font-family:var(--mono);font-size:11px;color:var(--text-main);text-align:right;word-break:break-word}
.info-note{font-family:var(--mono);font-size:11px;color:var(--text-dim);padding-top:2px}

.tabs.tabs-under{margin:10px 0 0}

@media (max-width: 980px){
  .md-body.md-body-v2{grid-template-columns:1fr;grid-template-areas:"left" "right" "bottom"}
  .profile-photo{width:150px;height:150px}
  .md-body.md-body-v2 > .md-left,
  .md-body.md-body-v2 > .md-right{min-height:auto}
}
.panel{border:1px solid rgba(255,75,110,.14);border-radius:12px;background:rgba(8,5,8,.55);padding:12px}
.panel h5{margin:0 0 10px;font-family:var(--display);text-transform:uppercase;letter-spacing:.6px;font-size:12px;color:var(--text-soft)}

.tabs{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px}
.tab, .ptab{
  border:1px solid rgba(255,75,110,.18);
  background:rgba(18,8,11,.55);
  color:var(--text-dim);
  border-radius:999px;
  padding:7px 10px;
  cursor:pointer;
  font-family:var(--mono);
  font-size:11px;
}
.tab.active, .ptab.active{color:var(--text-main);border-color:rgba(0,240,255,.35);box-shadow:0 0 14px rgba(0,240,255,.16)}

.profile-tabs{margin-top:6px}
.profile-tabcontent{min-height: 220px}

.big-radar{width:100%;height:auto;display:block}

/* Make radar labels readable on dark/glowy backgrounds */
.big-radar .radar-label{
  paint-order: stroke;
  stroke: rgba(0,0,0,.75);
  stroke-width: 4px;
}

.area-list{display:flex;flex-direction:column;gap:10px}
.area-row{display:grid;grid-template-columns:1fr 1.3fr auto;gap:10px;align-items:center}
.area-row .name{font-family:var(--mono);font-size:11px;color:var(--text-soft)}
.area-row .score{font-family:var(--mono);font-size:11px;color:var(--text-dim)}
.area-row .bar{height:10px;background:rgba(42,24,28,.85);border:1px solid rgba(255,75,110,.12);border-radius:999px;overflow:hidden}
.area-row .bar i{display:block;height:100%;background:linear-gradient(90deg, rgba(0,240,255,.55), rgba(255,75,110,.65));width:0%}

.footnote{margin-top:10px;font-family:var(--mono);font-size:11px;color:var(--text-dim);line-height:1.35}

/* Area detail popover (clickable radar points) */
.area-pop{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:1000;
  background:rgba(0,0,0,.58);
}
.area-pop.show{display:flex}
.area-pop .box{
  width:min(720px, 100%);
  border:1px solid rgba(0,240,255,.22);
  border-radius:14px;
  background:linear-gradient(180deg, rgba(8,5,8,.96), rgba(18,8,11,.94));
  box-shadow:0 0 34px rgba(0,0,0,.95);
  overflow:hidden;
}
.area-pop .box header{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px 14px;border-bottom:1px solid rgba(0,240,255,.16)}
.area-pop .box header b{font-family:var(--display);letter-spacing:.6px;text-transform:uppercase}
.area-pop .box header span{font-family:var(--mono);color:var(--text-dim);font-size:12px}
.area-pop .box .body{padding:12px 14px;display:grid;gap:10px}
.area-pop .kv{display:grid;grid-template-columns:160px 1fr;gap:10px;align-items:start}
.area-pop .k{font-family:var(--mono);color:var(--text-dim);font-size:11px}
.area-pop .v{font-family:var(--sans);color:var(--text-soft);font-size:13px;line-height:1.4}
.area-pop .v code{font-family:var(--mono);font-size:12px;color:var(--accent-amber)}

/* Org chart (PLT breakdown) */
.org-wrap{margin-top:10px; display:grid; gap:14px}
.org-legend{
  display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
  border:1px solid rgba(0,240,255,.14);
  background:linear-gradient(180deg, rgba(7,16,28,.42), rgba(8,5,8,.42));
  border-radius:14px;
  padding:10px 12px;
}
.org-legend-title{font-family:var(--display); text-transform:uppercase; letter-spacing:.6px; font-size:12px}
.org-legend-items{display:flex; gap:8px; flex-wrap:wrap}
.lg{display:inline-flex; align-items:center; gap:6px; font-family:var(--mono); font-size:11px; color:var(--text-dim); padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.08)}
.lg.radio{border-color:rgba(255,75,110,.35); box-shadow:0 0 14px rgba(255,75,110,.12) inset}
.lg.trans{border-color:rgba(200,155,75,.45); box-shadow:0 0 14px rgba(200,155,75,.12) inset}
.lg.data{border-color:rgba(53,184,255,.45); box-shadow:0 0 14px rgba(0,240,255,.12) inset}
.lg.network{border-color:rgba(70,255,170,.40); box-shadow:0 0 14px rgba(70,255,170,.10) inset}

.org-command{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px}
.org-role{border:1px solid rgba(255,75,110,.14); background:rgba(8,5,8,.42); border-radius:14px; padding:12px}
.org-role-title{font-family:var(--mono); font-size:11px; color:var(--text-dim); margin-bottom:8px; text-transform:uppercase; letter-spacing:.6px}

.org-squad-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); gap:12px}
.org-squad{border:1px solid rgba(255,75,110,.16); background:rgba(8,5,8,.40); border-radius:14px; padding:12px; box-shadow:0 0 18px rgba(0,0,0,.65)}
.org-squad-head{display:flex; align-items:flex-start; justify-content:space-between; gap:10px; margin-bottom:10px}
.org-squad-title{font-family:var(--display); font-size:14px; letter-spacing:.6px; text-transform:uppercase}
.org-squad-sub{font-family:var(--mono); font-size:11px; color:var(--text-dim); margin-top:2px}
.org-squad-leader{max-width:200px}

.org-team-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:10px}
.org-team{border:1px solid rgba(0,240,255,.12); background:rgba(7,16,28,.28); border-radius:12px; padding:10px}
.org-team-title{font-family:var(--mono); font-size:11px; color:rgba(0,240,255,.70); text-transform:uppercase; letter-spacing:.7px; margin-bottom:8px}
.org-team-list{display:grid; gap:8px}

.org-list{display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px}

.node{
  text-align:left;
  border-radius:12px;
  padding:10px 10px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(8,5,8,.55);
  cursor:pointer;
  width:100%;
}
.node:hover{filter:brightness(1.06); box-shadow:0 0 18px rgba(0,240,255,.10)}
.node:active{transform:translateY(1px)}
.node.compact{padding:8px 9px; border-radius:10px}
.node.role{box-shadow:0 0 18px rgba(255,75,110,.10) inset}
.node-name{font-family:var(--display); font-size:12px; letter-spacing:.4px; color:var(--text-main); line-height:1.1}
.node-sub{font-family:var(--mono); font-size:10px; color:var(--text-dim); margin-top:3px; line-height:1.2}

.node-radio{border-color:rgba(255,75,110,.35); background:linear-gradient(180deg, rgba(255,75,110,.16), rgba(8,5,8,.55))}
.node-trans{border-color:rgba(200,155,75,.45); background:linear-gradient(180deg, rgba(200,155,75,.16), rgba(8,5,8,.55))}
.node-data{border-color:rgba(53,184,255,.45); background:linear-gradient(180deg, rgba(0,240,255,.14), rgba(8,5,8,.55))}
.node-network{border-color:rgba(70,255,170,.40); background:linear-gradient(180deg, rgba(70,255,170,.12), rgba(8,5,8,.55))}
.node-neutral{border-color:rgba(255,255,255,.12)}

.org-wrap{margin-top:10px; display:grid; gap:14px}
.org-legend{
  display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
  border:1px solid rgba(0,240,255,.14);
  background:linear-gradient(180deg, rgba(8,5,8,.76), rgba(8,5,8,.55));
  border-radius:14px;
  padding:12px 14px;
}
.org-legend-title{font-family:var(--display);letter-spacing:.6px;text-transform:uppercase;font-size:12px;color:var(--text-main)}
.org-legend-items{display:flex; gap:8px; flex-wrap:wrap}
.lg{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;font-family:var(--mono);font-size:11px;border:1px solid rgba(255,255,255,.12)}
.lg.radio{background:rgba(255,75,110,.18); border-color:rgba(255,75,110,.30)}
.lg.trans{background:rgba(255,195,66,.16); border-color:rgba(255,195,66,.32)}
.lg.data{background:rgba(53,184,255,.14); border-color:rgba(53,184,255,.28)}
.lg.network{background:rgba(82,221,146,.14); border-color:rgba(82,221,146,.28)}

.org-command{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.org-role{
  border:1px solid rgba(255,75,110,.18);
  background:linear-gradient(180deg, rgba(18,8,11,.68), rgba(8,5,8,.52));
  border-radius:14px;
  padding:12px;
}
.org-role-title{font-family:var(--mono);font-size:11px;color:var(--text-dim);letter-spacing:.7px;text-transform:uppercase;margin-bottom:10px}

.org-squad-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:14px}
.org-squad{
  border:1px solid rgba(0,240,255,.12);
  background:linear-gradient(180deg, rgba(7,16,28,.38), rgba(8,5,8,.55));
  border-radius:14px;
  padding:12px;
}
.org-squad-head{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;margin-bottom:10px}
.org-squad-title{font-family:var(--display);letter-spacing:.6px;font-size:14px;text-transform:uppercase}
.org-squad-sub{font-family:var(--mono);font-size:11px;color:var(--text-dim);margin-top:4px}
.org-squad-leader{min-width:150px;max-width:220px}

.org-team-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px}
.org-team{
  border:1px solid rgba(255,255,255,.08);
  background:linear-gradient(180deg, rgba(8,5,8,.55), rgba(8,5,8,.42));
  border-radius:12px;
  padding:10px;
}
.org-team-title{font-family:var(--mono);font-size:11px;color:rgba(0,240,255,.82);letter-spacing:.7px;text-transform:uppercase;margin-bottom:8px}
.org-team-list{display:grid;gap:8px}

.org-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}

.node{
  width:100%;
  border-radius:10px;
  padding:10px 10px;
  text-align:left;
  cursor:pointer;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  box-shadow:0 0 16px rgba(0,0,0,.55);
}
.node:hover{transform:translateY(-1px); border-color:rgba(0,240,255,.22); box-shadow:0 0 16px rgba(0,240,255,.10), 0 0 16px rgba(0,0,0,.55)}
.node:active{transform:translateY(0px)}
.node.compact{padding:8px 9px}
.node.role{border-color:rgba(0,240,255,.26)}
.node-name{font-family:var(--display);letter-spacing:.4px;font-size:13px;color:var(--text-main)}
.node-sub{margin-top:4px;font-family:var(--mono);font-size:10px;color:var(--text-soft);opacity:.88}

.node-radio{background:linear-gradient(180deg, rgba(255,75,110,.22), rgba(8,5,8,.40));border-color:rgba(255,75,110,.32)}
.node-trans{background:linear-gradient(180deg, rgba(255,195,66,.18), rgba(8,5,8,.40));border-color:rgba(255,195,66,.30)}
.node-data{background:linear-gradient(180deg, rgba(53,184,255,.18), rgba(8,5,8,.40));border-color:rgba(53,184,255,.30)}
.node-network{background:linear-gradient(180deg, rgba(82,221,146,.18), rgba(8,5,8,.40));border-color:rgba(82,221,146,.30)}



@media (max-width: 980px){
  .md-body{grid-template-columns:1fr}
  .brand{min-width:auto}
}

/* --- Org chart connector accents (lightweight lines) --- */
.org-command{position:relative; padding-bottom:18px;}
.org-command:after{
  content:"";
  position:absolute;
  left:12px; right:12px;
  bottom:6px;
  height:1px;
  background:linear-gradient(90deg, transparent, rgba(0,240,255,.18), transparent);
}
.org-role{position:relative;}
.org-role:after{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:-18px;
  width:1px;
  height:18px;
  background:rgba(0,240,255,.16);
}
.org-squad-grid{position:relative;}
.org-squad-grid:before{
  content:"";
  position:absolute;
  left:24px; right:24px;
  top:-10px;
  height:1px;
  background:linear-gradient(90deg, transparent, rgba(0,240,255,.12), transparent);
}

/* Platoon Staff block (Squad column blank -> 'Platoon Staff') */
.org-staff{
  padding:14px;
  border:1px solid rgba(255,75,110,.24);
  border-radius:16px;
  background: linear-gradient(180deg, rgba(18,22,30,.72), rgba(10,12,16,.62));
  box-shadow: 0 12px 30px rgba(0,0,0,.35);
}
.org-staff-title{
  font-family: var(--display);
  letter-spacing: .9px;
  font-size: 13px;
  text-transform: uppercase;
  color: rgba(246,243,243,.82);
  margin-bottom: 10px;
}
.org-staff .org-list{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(180px, 1fr));
  gap:10px;
}

/* ----------------------------
   Mobile / Android responsiveness
   ---------------------------- */

/* Make modals fit small screens and scroll internally */
.md-dialog,
.area-pop .box{
  max-height: calc(100vh - 24px);
}
.md-dialog{overflow:auto;}

@media (max-width: 980px){
  .md-wrap{padding:14px 12px 40px;}
  .md-topbar{top:8px; padding:12px 14px;}
}

@media (max-width: 860px){
  /* Profile modal goes 1-column */
  .md-body{grid-template-columns: 1fr;}
  .panel{padding:12px;}
}

@media (max-width: 640px){
  /* Top bar stacks nicely */
  .md-topbar{flex-direction:column; align-items:stretch; gap:12px;}
  .brand{min-width:0;}
  .brand-title h1{font-size:16px;}

  /* Inputs/buttons bigger for touch */
  input[type="text"], select, .btn{min-height:44px;}
  .btn{padding:10px 12px;}

  /* Tabs/chips: easier tapping */
  .tabs{gap:10px;}
  .tab{padding:10px 12px; font-size:12px;}

  /* Radar labels readability */
  .big-radar .radar-label{font-size:12px;}

  /* Side panel should be full width on phones */
  .md-sidepanel-card{width: 100vw;}

  /* Team meta button: bigger tap target */
  .org-team-meta-btn{padding:6px 2px;}
}

@media (max-width: 540px){
  /* Org layout: reduce min widths so it doesn't overflow */
  .org-squad-grid{grid-template-columns: 1fr;}
  .org-team-grid{grid-template-columns: 1fr;}
  /* Keep tiles, avoid full-width "bars" */
  .org-list{grid-template-columns: repeat(2, minmax(150px, 1fr));}
  .org-squad-head{flex-direction:column; align-items:flex-start;}
  .org-squad-leader{max-width:100%;}

  /* Area detail popover: tighter spacing */
  .area-pop .kv{grid-template-columns: 120px 1fr;}
}

@media (max-width: 380px){
  .org-list{grid-template-columns: 1fr;}
}

/* Reduce heavy effects for lower-end devices (Android friendly) */
@media (prefers-reduced-motion: reduce){
  *{scroll-behavior:auto;}
  .md-topbar, .md-dialog, .area-pop .box, .md-sidepanel-card{transition:none !important;}
}

@media (max-width: 540px){
  .md-modal{padding:10px;}
  .md-dialog{border-radius:12px;}
  .area-pop{padding:10px;}
}


/* ----------------------------
   Team side panel (team meta)
   ---------------------------- */
.md-sidepanel{position:fixed; inset:0; z-index:1300; display:none;}
.md-sidepanel.show{display:block;}
.md-sidepanel-overlay{position:absolute; inset:0; background:rgba(0,0,0,.55); backdrop-filter: blur(2px);} 
.md-sidepanel-card{position:absolute; top:12px; right:12px; width:420px; max-width: calc(100vw - 24px); height: calc(100vh - 24px); overflow:auto;}

.org-team-title{display:flex; align-items:baseline; justify-content:space-between; gap:10px;}
.org-team-meta-btn{background:none; border:0; color: rgba(160,234,252,.9); font-family: var(--display); letter-spacing:.6px; font-size:12px; cursor:pointer; padding:6px 8px; border-radius:10px;}
.org-team-meta-btn:hover{background: rgba(160,234,252,.08);}
.org-team-meta-btn:active{transform: translateY(1px);} 

.tp-stats{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
.tp-stat{background: rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px;}
.tp-stat .k{font-size:11px; color: rgba(208,195,195,.70); letter-spacing:.9px; text-transform:uppercase; font-family: var(--display);}
.tp-stat .v{margin-top:6px; font-family: var(--display); letter-spacing:.6px; font-size:16px; color: rgba(246,243,243,.88);} 

.tp-ranks{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
@media (max-width: 520px){
  .tp-ranks{grid-template-columns:1fr;}
}
.tp-row{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px; border-radius:14px; background: rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.06); margin-bottom:10px;}
.tp-row .nm{font-family: var(--display); letter-spacing:.7px; font-size:12px; color: rgba(246,243,243,.86);} 
.tp-row .meta{font-size:11px; color: rgba(208,195,195,.68); margin-top:4px;}
.tp-row .sc{font-family: var(--display); letter-spacing:.6px; font-size:12px; color: rgba(246,243,243,.80);} 


/* --- FIX: prevent team column overlap/overflow --- */
.org-team{ min-width:0; overflow:hidden; }
.org-squad{ min-width:0; }
.org-team-grid{ align-items:start; }
.org-team-list{ display:flex; flex-direction:column; gap:12px; }
.node{ box-sizing:border-box; }


/* === v36 readability pass: PLT tiles === */
.plt-tiles .tile-label{
  /* Make the PLT label pop even on dark/scanline backgrounds */
  font-size: 24px;
  font-weight: 900;
  letter-spacing: .04em;
  color: rgba(250, 253, 255, 0.98);
  text-shadow: 0 2px 18px rgba(0,0,0,.92), 0 0 14px rgba(0, 238, 255, .18);
  -webkit-text-stroke: 0.6px rgba(0,0,0,.55);
  padding: 6px 10px;
  border-radius: 12px;
  display: inline-block;
  background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.25));
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: inset 0 0 0 1px rgba(0, 238, 255, .10);
}
.plt-tiles .tile-kind{
  font-size: 12px;
  font-weight: 800;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: rgba(200, 230, 255, 0.92);
  text-shadow: 0 2px 10px rgba(0,0,0,.85);
}
.plt-tiles .tile-statline{
  color: rgba(215, 235, 255, 0.9);
}
.plt-tiles .tile-bar{
  background: rgba(255,255,255,.08);
}
.plt-tiles .tile-left{
  padding: 8px 10px;
  border-radius: 14px;
  background: rgba(0,0,0,.28);
  border: 1px solid rgba(255,255,255,.06);
  backdrop-filter: blur(6px);
}
.plt-tiles .tile{
  border-color: rgba(255, 60, 120, .35);
}


/* === Readability fix: PLT selection tile labels === */
.tile-grid .tile[data-kind="plt"] .tile-label{
  color: rgba(245,250,255,0.98);
  text-shadow: 0 1px 0 rgba(0,0,0,0.85), 0 0 18px rgba(120,210,255,0.22);
  background: rgba(0,0,0,0.38);
  padding: 4px 10px;
  border-radius: 12px;
  display: inline-block;
  line-height: 1.1;
}
.tile-grid .tile[data-kind="plt"] .tile-label .muted{
  opacity: 0.95;
}
